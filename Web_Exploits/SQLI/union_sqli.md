# Sqli
## @Author : M3tr1c_r00t
### Union Clause
Is used to combine results from multiple SELECT statements. With this, we will be able to SELECT and dump data from all across the DBMS, from multiple tables and databases. 
```
mysql> SELECT * FROM ports UNION SELECT * FROM ships;
```
Some of the rows belong to the ports table while others belong to the ships table.

__Note:__ The data types of the selected columns on all positions should be the same.
### Union on Same No of Columns

A UNION statement can only operate on SELECT statements with an equal number of columns.

If we attempt to UNION two queries that have results with a different number of columns, we get an error.
```
mysql> SELECT city FROM ports UNION SELECT * FROM ships;
ERROR 1222 (21000): The used SELECT statements have a different number of columns
```

Once we have two queries that return the same number of columns, we can use the UNION operator to extract data from other tables and databases.
```
SELECT * FROM products WHERE product_id = ‘user_input’
```
We can inject a UNION query into the input, such that rows from another table are returned:
```
SELECT * from products where product_id = ‘1’ UNION SELECT username, password from passwords—‘
```
This would return username and password entries from the passwords table, assuming the products table has two columns.

### Un-even Columns
Suppose we only had one column. In that case, we want to SELECT, we can put junk data for the remaining required columns so that the total number of columns we are UNIONing with remains the same as the original query.

We can use any string as our junk data, and the query will return the string as its output for that column. 

If we UNION with the string “junk”, the SELECT query would be SELECT “junk” from passwords, which will always return junk. 

We can also use numbers. For example, the query SELECT 1 from passwords will always return 1 as the output.

__Note:__ When filling other columns with junk data, we must ensure that the data type matches the columns data type, otherwise the query will return an error.

__**Tip:**__ For advanced SQL injection, we may want to simply use 'NULL' to fill other columns, as 'NULL' fits all data types.

So we have to UNION with two columns. If we only wanted to get one column ‘e.g. username’, we have to do username, 2, such that we have the same number of columns:
```
SELECT * from products where product_id = ‘1’ UNION SELECT username, 2 from passwords
```
If we had more columns in the table of the original query, we have to add more numbers to create the remaining required columns. 
```
UNION SELECT username, 2, 3, 4 from passwords—‘
```
This would return:
```
mysql> SELECT * from products where product_id UNION SELECT username, 2, 3, 4 from passwords—‘

+-----------+-----------+-----------+-----------+
| product_1 | product_2 | product_3 | product_4 |
+-----------+-----------+-----------+-----------+
|   admin   |    2      |    3      |    4      |
+-----------+-----------+-----------+-----------+
```
As we can see, our wanted output of the ‘UNION SELECT username from passwords’ query is found at the first column of the second row, while the numbers filled the remaining columns.

## My socials:
<br>@ twitter: https://twitter.com/M3tr1c_root
<br>@ instagram: https://instagram.com/m3tr1c_r00t/
